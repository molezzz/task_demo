<div ng-controller="EventsCtrl">
  <div class="page-header">
    <h5>
      筛选动态：
      <div class="btn-group btn-group-sm">
        <a href="#" class="btn btn-success">{{filter.member.name}}</a>
        <a href="#" class="btn btn-success dropdown-toggle" data-toggle="dropdown"><span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li ng-repeat="(key, member) in teamMembers" ng-click="filter.member = member">
            <a href="#member-{{member.key}}">{{member.name}}</a>
          </li>
        </ul>
      </div>
    </h5>
  </div>

  <div class="panel panel-default">
    <div class="panel-heading">Panel heading</div>
    <div class="panel-body">
      <blockquote>
        <ul class="media-list">
          <li class="media">
            <a class="pull-left" href="#">
              <img class="media-object" data-src="holder.js/64x64" alt="64x64" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCI+PHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjZWVlIi8+PHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMzIiIHk9IjMyIiBzdHlsZT0iZmlsbDojYWFhO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1zaXplOjEycHg7Zm9udC1mYW1pbHk6QXJpYWwsSGVsdmV0aWNhLHNhbnMtc2VyaWY7ZG9taW5hbnQtYmFzZWxpbmU6Y2VudHJhbCI+NjR4NjQ8L3RleHQ+PC9zdmc+" style="width: 64px; height: 64px;">
            </a>
            <div class="media-body">
              <h4 class="media-heading">Media heading</h4>
              <p>Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin commodo. Cras purus odio, vestibulum in vulputate at, tempus viverra turpis.</p>
            </div>
          </li>
        </ul>
      </blockquote>
    </div>
  </div>
</div>
<script type="text/javascript">
(function(){
var teamMembers = <%=@team_members.to_json.html_safe%>;
var app = angular.module('tower.events', [], angular.noop);

app.controller('EventsCtrl', ['$scope', '$http', function($scope, $http){

  $scope.teamMembers = teamMembers;
  $scope.teamMembers.unshift({key: null, name: '所有成员'});

  $scope.filter = {
    member: $scope.teamMembers[0]
  }

  $scope.$watch('filter',function(to, from){
    console.log(to, from);
  }, true);

}]);

angular.bootstrap(document.documentElement, ['tower.events']);
})();
</script>